{
  "cells": [
    {
      "cell_type": "markdown",
      "source": [
        "# **Ⅲ 외국인 노동자 관련 이슈_기사 크롤링**"
      ],
      "metadata": {
        "id": "MPj-TXShjOvD"
      },
      "id": "MPj-TXShjOvD"
    },
    {
      "cell_type": "markdown",
      "source": [
        "# **1. 라이브러리 및 모듈 불러오기**"
      ],
      "metadata": {
        "id": "TfNewZWQjkhl"
      },
      "id": "TfNewZWQjkhl"
    },
    {
      "cell_type": "code",
      "source": [
        "import pandas as pd\n",
        "import numpy as np\n",
        "import matplotlib.pyplot as plt\n",
        "#sys 모듈 설치\n",
        "import sys"
      ],
      "metadata": {
        "id": "Etj3ZiGb5cZB"
      },
      "id": "Etj3ZiGb5cZB",
      "execution_count": 3,
      "outputs": []
    },
    {
      "cell_type": "code",
      "source": [
        "#한글 폰트 설치\n",
        "!sudo apt-get install -y fonts-nanum\n",
        "!sudo fc-cache -fv\n",
        "!rm ~/.cache/matplotlib -rf"
      ],
      "metadata": {
        "colab": {
          "base_uri": "https://localhost:8080/"
        },
        "id": "aAZr0irA5hdr",
        "outputId": "0218fe10-780b-4939-8cb3-7695627f819a"
      },
      "id": "aAZr0irA5hdr",
      "execution_count": 2,
      "outputs": [
        {
          "output_type": "stream",
          "name": "stdout",
          "text": [
            "Reading package lists... Done\n",
            "Building dependency tree       \n",
            "Reading state information... Done\n",
            "fonts-nanum is already the newest version (20170925-1).\n",
            "The following package was automatically installed and is no longer required:\n",
            "  libnvidia-common-460\n",
            "Use 'sudo apt autoremove' to remove it.\n",
            "0 upgraded, 0 newly installed, 0 to remove and 45 not upgraded.\n",
            "/usr/share/fonts: caching, new cache contents: 0 fonts, 1 dirs\n",
            "/usr/share/fonts/truetype: caching, new cache contents: 0 fonts, 3 dirs\n",
            "/usr/share/fonts/truetype/humor-sans: caching, new cache contents: 1 fonts, 0 dirs\n",
            "/usr/share/fonts/truetype/liberation: caching, new cache contents: 16 fonts, 0 dirs\n",
            "/usr/share/fonts/truetype/nanum: caching, new cache contents: 10 fonts, 0 dirs\n",
            "/usr/local/share/fonts: caching, new cache contents: 0 fonts, 0 dirs\n",
            "/root/.local/share/fonts: skipping, no such directory\n",
            "/root/.fonts: skipping, no such directory\n",
            "/var/cache/fontconfig: cleaning cache directory\n",
            "/root/.cache/fontconfig: not cleaning non-existent cache directory\n",
            "/root/.fontconfig: not cleaning non-existent cache directory\n",
            "fc-cache: succeeded\n"
          ]
        }
      ]
    },
    {
      "cell_type": "code",
      "source": [
        "#한글 폰트 설정\n",
        "plt.rc('font', family='NanumBarunGothic') "
      ],
      "metadata": {
        "id": "rtB0pRLQ5h64"
      },
      "id": "rtB0pRLQ5h64",
      "execution_count": 4,
      "outputs": []
    },
    {
      "cell_type": "code",
      "source": [
        "#필요 라이브러리 설치\n",
        "!pip install beautifulsoup4\n",
        "!pip install urllib3\n",
        "!pip install openpyxl\n",
        "\n",
        "#urllib : 특정 url 주소에 접근할 때 사용할 라이브러리\n",
        "#beautifulsoup : url에서 html 정보를 파이썬에서 이해할 수 있는 언어로 변환하는 (parsing,파싱) 라이브러리"
      ],
      "metadata": {
        "colab": {
          "base_uri": "https://localhost:8080/"
        },
        "id": "jw79N40h5kxK",
        "outputId": "828c959b-f6eb-490d-b8f4-183d44b46903"
      },
      "id": "jw79N40h5kxK",
      "execution_count": 5,
      "outputs": [
        {
          "output_type": "stream",
          "name": "stdout",
          "text": [
            "Looking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/\n",
            "Requirement already satisfied: beautifulsoup4 in /usr/local/lib/python3.7/dist-packages (4.6.3)\n",
            "Looking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/\n",
            "Requirement already satisfied: urllib3 in /usr/local/lib/python3.7/dist-packages (1.24.3)\n",
            "Looking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/\n",
            "Requirement already satisfied: openpyxl in /usr/local/lib/python3.7/dist-packages (3.0.10)\n",
            "Requirement already satisfied: et-xmlfile in /usr/local/lib/python3.7/dist-packages (from openpyxl) (1.1.0)\n"
          ]
        }
      ]
    },
    {
      "cell_type": "code",
      "source": [
        "#라이브러리 불러오기\n",
        "from bs4 import BeautifulSoup\n",
        "import requests\n",
        "import openpyxl"
      ],
      "metadata": {
        "id": "aIys3e345o4L"
      },
      "id": "aIys3e345o4L",
      "execution_count": 7,
      "outputs": []
    },
    {
      "cell_type": "markdown",
      "source": [
        "# **2. 크롤링을 위한 함수 생성**"
      ],
      "metadata": {
        "id": "lq1tHKKLkXMn"
      },
      "id": "lq1tHKKLkXMn"
    },
    {
      "cell_type": "markdown",
      "source": [
        "**크롤링 전 함수 생성 과정**"
      ],
      "metadata": {
        "id": "QQ27RJ_uktfq"
      },
      "id": "QQ27RJ_uktfq"
    },
    {
      "cell_type": "code",
      "execution_count": 11,
      "id": "0f7e7dbc-0608-422d-9ba7-c767e1d35539",
      "metadata": {
        "id": "0f7e7dbc-0608-422d-9ba7-c767e1d35539"
      },
      "outputs": [],
      "source": [
        "# 페이지 url 형식에 맞게 바꾸어 주는 함수 만들기\n",
        " #입력된 수를 1, 11, 21, 31 ...만들어 주는 함수\n",
        "def makePgNum(num):\n",
        "    if num == 1:\n",
        "        return num\n",
        "    elif num == 0:\n",
        "        return num+1\n",
        "    else:\n",
        "        return num+9*(num-1)"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 12,
      "id": "17a1f6a5-a31d-482a-8f26-5c2991cb4e01",
      "metadata": {
        "id": "17a1f6a5-a31d-482a-8f26-5c2991cb4e01"
      },
      "outputs": [],
      "source": [
        "# 크롤링할 url 생성하는 함수 만들기(검색어, 크롤링 시작 페이지, 크롤링 종료 페이지)\n",
        "def makeUrl(search,start_pg,end_pg):\n",
        "    if start_pg == end_pg:\n",
        "        start_page = makePgNum(start_pg)\n",
        "        url = \"https://search.naver.com/search.naver?where=news&sm=tab_pge&query=\" + search + \"&start=\" + '&sort=0&photo=0&field=0&pd=5&ds=2021.05.26&de=2022.05.26&cluster_rank=16&mynews=0&office_type=0&office_section_code=0&news_office_checked=&nso=so:r,p:1y,a:all' + \"&start=\" + str(start_page)\n",
        "        print(\"생성url: \",url)\n",
        "        return url\n",
        "    else:\n",
        "        urls= []\n",
        "        for i in range(start_pg,end_pg+1):\n",
        "            page = makePgNum(i)\n",
        "            url = \"https://search.naver.com/search.naver?where=news&sm=tab_pge&query=\" + search + '&sort=0&photo=0&field=0&pd=5&ds=2021.05.26&de=2022.05.26&cluster_rank=16&mynews=0&office_type=0&office_section_code=0&news_office_checked=&nso=so:r,p:1y,a:all' + \"&start=\" + str(page)\n",
        "            urls.append(url)\n",
        "        print(\"생성url: \",urls)\n",
        "        return urls"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 13,
      "id": "cfe266c3-a894-49f7-a72f-cbbe20ffb1fb",
      "metadata": {
        "id": "cfe266c3-a894-49f7-a72f-cbbe20ffb1fb"
      },
      "outputs": [],
      "source": [
        "# html에서 원하는 속성 추출하는 함수 만들기 (기사, 추출하려는 속성값)\n",
        "def news_attrs_crawler(articles,attrs):\n",
        "    attrs_content=[]\n",
        "    for i in articles:\n",
        "        attrs_content.append(i.attrs[attrs])\n",
        "    return attrs_content\n"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 14,
      "id": "1cffd922-22a8-43e4-a8f1-f1fbefe869af",
      "metadata": {
        "id": "1cffd922-22a8-43e4-a8f1-f1fbefe869af"
      },
      "outputs": [],
      "source": [
        "#뉴스기사 내용 크롤링하는 함수 만들기(각 뉴스의 url)\n",
        "def news_contents_crawler(news_url):\n",
        "    contents=[]\n",
        "    for i in news_url:\n",
        "        #각 기사 html get하기\n",
        "        news = requests.get(i)\n",
        "        news_html = BeautifulSoup(news.text,\"html.parser\")\n",
        "            #기사 내용 가져오기 (p태그의 내용 모두 가져오기) \n",
        "        contents.append(news_html.find_all('p'))\n",
        "    return contents"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 15,
      "id": "9935e870-b915-489a-8381-bcb14088f572",
      "metadata": {
        "id": "9935e870-b915-489a-8381-bcb14088f572"
      },
      "outputs": [],
      "source": [
        "#html생성해서 기사크롤링하는 함수 만들기(제목,url): 3개의 값을 반환함(제목, 링크, 내용)\n",
        "def articles_crawler(url):\n",
        "    #html 불러오기\n",
        "    original_html = requests.get(i)\n",
        "    html = BeautifulSoup(original_html.text, \"html.parser\")\n",
        "    # 검색결과\n",
        "    articles = html.select(\"div.group_news > ul.list_news > li div.news_area > a\")\n",
        "    title = news_attrs_crawler(articles,'title')\n",
        "    url = news_attrs_crawler(articles,'href')\n",
        "    content = news_contents_crawler(url)\n",
        "    return title, url, content #3개의 값을 반환"
      ]
    },
    {
      "cell_type": "markdown",
      "source": [
        "# **3. 뉴스 기사 크롤링**"
      ],
      "metadata": {
        "id": "IXSz7ioHkbLy"
      },
      "id": "IXSz7ioHkbLy"
    },
    {
      "cell_type": "markdown",
      "source": [
        "**크롤링 과정**"
      ],
      "metadata": {
        "id": "ONmvIV0ykiZM"
      },
      "id": "ONmvIV0ykiZM"
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "id": "da43b7ad-f71b-43aa-89d6-befb58d0286a",
      "metadata": {
        "id": "da43b7ad-f71b-43aa-89d6-befb58d0286a"
      },
      "outputs": [],
      "source": [
        "#####뉴스크롤링 시작#####\n",
        "\n",
        "#검색어 입력\n",
        "search = input(\"검색할 키워드를 입력해주세요:\")\n",
        "\n",
        "#검색 시작할 페이지 입력\n",
        "page = int(input(\"\\n크롤링할 시작 페이지를 입력해주세요. ex)1(숫자만입력):\")) # ex)1 =1페이지,2=2페이지...\n",
        "print(\"\\n크롤링할 시작 페이지: \",page,\"페이지\")   \n",
        "#검색 종료할 페이지 입력\n",
        "page2 = int(input(\"\\n크롤링할 종료 페이지를 입력해주세요. ex)1(숫자만입력):\")) # ex)1 =1페이지,2=2페이지...\n",
        "print(\"\\n크롤링할 종료 페이지: \",page2,\"페이지\")   \n",
        "\n",
        "# naver url 생성\n",
        "url = makeUrl(search,page,page2)\n",
        "\n",
        "#뉴스 크롤러 실행\n",
        "news_titles = []\n",
        "news_url =[]\n",
        "news_contents =[]\n",
        "for i in url:\n",
        "    title, url,content = articles_crawler(url)\n",
        "    news_titles.append(title)\n",
        "    news_url.append(url)\n",
        "    news_contents.append(content)\n",
        "\n",
        "print(\"검색된 기사 갯수: 총 \",(page2+1-page)*10,'개')\n",
        "print(\"\\n[뉴스 제목]\")\n",
        "print(news_titles)\n",
        "print(\"\\n[뉴스 링크]\")\n",
        "print(news_url)\n",
        "print(\"\\n[뉴스 내용]\")\n",
        "print(news_contents)"
      ]
    },
    {
      "cell_type": "markdown",
      "source": [
        "# **4. 크롤링 결과를 데이터프레임으로 저장**"
      ],
      "metadata": {
        "id": "74EbmC7LlK86"
      },
      "id": "74EbmC7LlK86"
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "id": "e14b70ec-09c0-49d5-a60c-f089be2cb7fd",
      "metadata": {
        "colab": {
          "base_uri": "https://localhost:8080/",
          "height": 893
        },
        "id": "e14b70ec-09c0-49d5-a60c-f089be2cb7fd",
        "outputId": "f4c654e6-1f57-4672-cc55-33408d255744"
      },
      "outputs": [
        {
          "output_type": "execute_result",
          "data": {
            "text/plain": [
              "                                                title  \\\n",
              "0                     휴대폰 든 상자만 훔친 택배사 외국인일용직 2명 '덜미'   \n",
              "1                        택배 물건서 최신 휴대폰만 절도..외국인노동자 검거   \n",
              "2                   방역지침 완화에 경북 시·군, 외국인 계절근로자 앞다퉈 도입   \n",
              "3                      두산건설 공사현장서 외국인 노동자 사망…중대재해법 조사   \n",
              "4             “고용허가제, 현대판 노예제”…이주노동자 기본권·인권·노동권 침해 심각   \n",
              "5                      외국인 일손 떠난 농촌… 경범죄자·노숙자 ‘구원 등판’   \n",
              "6   [41주년 특별기획] 외국인, 일꾼을 넘어 동반자를 꿈꾸다 ① 농업·농촌 현장에 일...   \n",
              "7               “개시장 단골은 70대 노인과 외국인 노동자뿐... 이젠 접어야죠”   \n",
              "8              아파트 공사현장서 30대 노동자 사망… 광주 중대재해 처벌 1호 되나   \n",
              "9                          부산 도금 공장에서 불…외국인 노동자 6명 대피   \n",
              "10                          선관위 “지방선거 노동자 투표 시간 보장해야”   \n",
              "11                        장수군, 부족한 농촌일손 외국인 계절근로자로 해소   \n",
              "12                      \"외국인 주민도 우리 이웃\"…세계인의 날 기념식 열려   \n",
              "13                    야외노동자·홀로노인 '맞춤형 폭염예보'…역대급 더위 대응   \n",
              "14                          고령군, 외국인 노동자·다문화 여성 쉼터 조성   \n",
              "15                      '맨발로 밟은 마른 오징어' 영상 올린 외국인들 잠적   \n",
              "16                     중소기업계 \"외국인 근로자도 떠나, 일할 사람이 없다\"   \n",
              "17                         선관위, “지방선거 노동자 투표 시간 보장해야”   \n",
              "18                    [진주] '농촌 일손 지원' 외국인 계절노동자 도입 추진   \n",
              "19      김해시, 외국인주민 지원 공로 '제15회 세계인의 날 기념 행안부장관 표창' 수상   \n",
              "\n",
              "                                                 link  \\\n",
              "0   http://www.newsis.com/view/?id=NISX20220526_00...   \n",
              "1         https://ysmbc.co.kr/article/NWaMc7iR7_orUjn   \n",
              "2   https://www.yna.co.kr/view/AKR2022052612310005...   \n",
              "3   https://www.sisa-news.com/news/article.html?no...   \n",
              "4   https://www.kgnews.co.kr/news/article.html?no=...   \n",
              "5   https://www.chosun.com/national/national_gener...   \n",
              "6   http://www.aflnews.co.kr/news/articleView.html...   \n",
              "7   https://www.chosun.com/national/weekend/2022/0...   \n",
              "8            https://www.nocutnews.co.kr/news/5761459   \n",
              "9   https://news.kbs.co.kr/news/view.do?ncd=546731...   \n",
              "10  https://news.kbs.co.kr/news/view.do?ncd=547252...   \n",
              "11  http://www.newsis.com/view/?id=NISX20220523_00...   \n",
              "12           https://www.nocutnews.co.kr/news/5759991   \n",
              "13           https://www.nocutnews.co.kr/news/5761925   \n",
              "14                             https://bit.ly/3wCXAOo   \n",
              "15  http://www.busan.com/view/busan/view.php?code=...   \n",
              "16  http://news.mt.co.kr/mtview.php?no=20220524103...   \n",
              "17  https://news.kbs.co.kr/news/view.do?ncd=547239...   \n",
              "18  http://www.ohmynews.com/NWS_Web/View/at_pg.asp...   \n",
              "19  https://www.nbntv.co.kr/news/articleView.html?...   \n",
              "\n",
              "                                              content  \n",
              "0   [[2022.05.28 (토)], [[서울 16℃]], [[사회]], [휴대폰 든 ...  \n",
              "1                                                  []  \n",
              "2   [[재난포털], [기사제보], [자동완성 기능이 켜져 있습니다.], [[송고시간],...  \n",
              "3   [[2022.05.28 (토)], [ ], [[시사뉴스 한지혜 기자] 두산건설 공사...  \n",
              "4   [[2022.05.28 (토)], [ ], [“이주노동자들이 사는 숙소 가운데는 비...  \n",
              "5                                                  []  \n",
              "6   [[[농수축산신문=박유신 기자]], [[<span style=\"font-family...  \n",
              "7                                                  []  \n",
              "8   [[\\n, [\\n, <img alt=\"탑배너 닫기\" src=\"//img.nocutn...  \n",
              "9   [[\\n, [황현규 기자], \\n, [true@kbs.co.kr], \\n], [Co...  \n",
              "10  [[\\n, [공웅조 기자], \\n, [salt@kbs.co.kr], \\n], [Co...  \n",
              "11  [[2022.05.28 (토)], [[서울 16℃]], [[지방]], [장수군, 부...  \n",
              "12  [[\\n, [\\n, <img alt=\"탑배너 닫기\" src=\"//img.nocutn...  \n",
              "13  [[\\n, [\\n, <img alt=\"탑배너 닫기\" src=\"//img.nocutn...  \n",
              "14  [[뉴스, []], [\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t...  \n",
              "15  [[\\n                    '맨발로 밟은 마른 오징어' 영상 올린 ...  \n",
              "16  [[중소기업계 \"외국인 근로자도 떠나, 일할 사람이 없다\"], [\\n        ...  \n",
              "17  [[\\n, [공웅조 기자], \\n, [salt@kbs.co.kr], \\n], [Co...  \n",
              "18  [[[메뉴 건너뛰기]], [[], [<img alt=\"close\" src=\"http...  \n",
              "19  [[[경남=내외경제TV]이재훈 기자= 김해시는 지난 22일 경상남도에서 주최한 ‘2...  "
            ],
            "text/html": [
              "\n",
              "  <div id=\"df-19538142-c5e2-43c9-a490-489d5c2ba7be\">\n",
              "    <div class=\"colab-df-container\">\n",
              "      <div>\n",
              "<style scoped>\n",
              "    .dataframe tbody tr th:only-of-type {\n",
              "        vertical-align: middle;\n",
              "    }\n",
              "\n",
              "    .dataframe tbody tr th {\n",
              "        vertical-align: top;\n",
              "    }\n",
              "\n",
              "    .dataframe thead th {\n",
              "        text-align: right;\n",
              "    }\n",
              "</style>\n",
              "<table border=\"1\" class=\"dataframe\">\n",
              "  <thead>\n",
              "    <tr style=\"text-align: right;\">\n",
              "      <th></th>\n",
              "      <th>title</th>\n",
              "      <th>link</th>\n",
              "      <th>content</th>\n",
              "    </tr>\n",
              "  </thead>\n",
              "  <tbody>\n",
              "    <tr>\n",
              "      <th>0</th>\n",
              "      <td>휴대폰 든 상자만 훔친 택배사 외국인일용직 2명 '덜미'</td>\n",
              "      <td>http://www.newsis.com/view/?id=NISX20220526_00...</td>\n",
              "      <td>[[2022.05.28 (토)], [[서울 16℃]], [[사회]], [휴대폰 든 ...</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>1</th>\n",
              "      <td>택배 물건서 최신 휴대폰만 절도..외국인노동자 검거</td>\n",
              "      <td>https://ysmbc.co.kr/article/NWaMc7iR7_orUjn</td>\n",
              "      <td>[]</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>2</th>\n",
              "      <td>방역지침 완화에 경북 시·군, 외국인 계절근로자 앞다퉈 도입</td>\n",
              "      <td>https://www.yna.co.kr/view/AKR2022052612310005...</td>\n",
              "      <td>[[재난포털], [기사제보], [자동완성 기능이 켜져 있습니다.], [[송고시간],...</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>3</th>\n",
              "      <td>두산건설 공사현장서 외국인 노동자 사망…중대재해법 조사</td>\n",
              "      <td>https://www.sisa-news.com/news/article.html?no...</td>\n",
              "      <td>[[2022.05.28 (토)], [ ], [[시사뉴스 한지혜 기자] 두산건설 공사...</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>4</th>\n",
              "      <td>“고용허가제, 현대판 노예제”…이주노동자 기본권·인권·노동권 침해 심각</td>\n",
              "      <td>https://www.kgnews.co.kr/news/article.html?no=...</td>\n",
              "      <td>[[2022.05.28 (토)], [ ], [“이주노동자들이 사는 숙소 가운데는 비...</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>5</th>\n",
              "      <td>외국인 일손 떠난 농촌… 경범죄자·노숙자 ‘구원 등판’</td>\n",
              "      <td>https://www.chosun.com/national/national_gener...</td>\n",
              "      <td>[]</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>6</th>\n",
              "      <td>[41주년 특별기획] 외국인, 일꾼을 넘어 동반자를 꿈꾸다 ① 농업·농촌 현장에 일...</td>\n",
              "      <td>http://www.aflnews.co.kr/news/articleView.html...</td>\n",
              "      <td>[[[농수축산신문=박유신 기자]], [[&lt;span style=\"font-family...</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>7</th>\n",
              "      <td>“개시장 단골은 70대 노인과 외국인 노동자뿐... 이젠 접어야죠”</td>\n",
              "      <td>https://www.chosun.com/national/weekend/2022/0...</td>\n",
              "      <td>[]</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>8</th>\n",
              "      <td>아파트 공사현장서 30대 노동자 사망… 광주 중대재해 처벌 1호 되나</td>\n",
              "      <td>https://www.nocutnews.co.kr/news/5761459</td>\n",
              "      <td>[[\\n, [\\n, &lt;img alt=\"탑배너 닫기\" src=\"//img.nocutn...</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>9</th>\n",
              "      <td>부산 도금 공장에서 불…외국인 노동자 6명 대피</td>\n",
              "      <td>https://news.kbs.co.kr/news/view.do?ncd=546731...</td>\n",
              "      <td>[[\\n, [황현규 기자], \\n, [true@kbs.co.kr], \\n], [Co...</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>10</th>\n",
              "      <td>선관위 “지방선거 노동자 투표 시간 보장해야”</td>\n",
              "      <td>https://news.kbs.co.kr/news/view.do?ncd=547252...</td>\n",
              "      <td>[[\\n, [공웅조 기자], \\n, [salt@kbs.co.kr], \\n], [Co...</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>11</th>\n",
              "      <td>장수군, 부족한 농촌일손 외국인 계절근로자로 해소</td>\n",
              "      <td>http://www.newsis.com/view/?id=NISX20220523_00...</td>\n",
              "      <td>[[2022.05.28 (토)], [[서울 16℃]], [[지방]], [장수군, 부...</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>12</th>\n",
              "      <td>\"외국인 주민도 우리 이웃\"…세계인의 날 기념식 열려</td>\n",
              "      <td>https://www.nocutnews.co.kr/news/5759991</td>\n",
              "      <td>[[\\n, [\\n, &lt;img alt=\"탑배너 닫기\" src=\"//img.nocutn...</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>13</th>\n",
              "      <td>야외노동자·홀로노인 '맞춤형 폭염예보'…역대급 더위 대응</td>\n",
              "      <td>https://www.nocutnews.co.kr/news/5761925</td>\n",
              "      <td>[[\\n, [\\n, &lt;img alt=\"탑배너 닫기\" src=\"//img.nocutn...</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>14</th>\n",
              "      <td>고령군, 외국인 노동자·다문화 여성 쉼터 조성</td>\n",
              "      <td>https://bit.ly/3wCXAOo</td>\n",
              "      <td>[[뉴스, []], [\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t...</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>15</th>\n",
              "      <td>'맨발로 밟은 마른 오징어' 영상 올린 외국인들 잠적</td>\n",
              "      <td>http://www.busan.com/view/busan/view.php?code=...</td>\n",
              "      <td>[[\\n                    '맨발로 밟은 마른 오징어' 영상 올린 ...</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>16</th>\n",
              "      <td>중소기업계 \"외국인 근로자도 떠나, 일할 사람이 없다\"</td>\n",
              "      <td>http://news.mt.co.kr/mtview.php?no=20220524103...</td>\n",
              "      <td>[[중소기업계 \"외국인 근로자도 떠나, 일할 사람이 없다\"], [\\n        ...</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>17</th>\n",
              "      <td>선관위, “지방선거 노동자 투표 시간 보장해야”</td>\n",
              "      <td>https://news.kbs.co.kr/news/view.do?ncd=547239...</td>\n",
              "      <td>[[\\n, [공웅조 기자], \\n, [salt@kbs.co.kr], \\n], [Co...</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>18</th>\n",
              "      <td>[진주] '농촌 일손 지원' 외국인 계절노동자 도입 추진</td>\n",
              "      <td>http://www.ohmynews.com/NWS_Web/View/at_pg.asp...</td>\n",
              "      <td>[[[메뉴 건너뛰기]], [[], [&lt;img alt=\"close\" src=\"http...</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>19</th>\n",
              "      <td>김해시, 외국인주민 지원 공로 '제15회 세계인의 날 기념 행안부장관 표창' 수상</td>\n",
              "      <td>https://www.nbntv.co.kr/news/articleView.html?...</td>\n",
              "      <td>[[[경남=내외경제TV]이재훈 기자= 김해시는 지난 22일 경상남도에서 주최한 ‘2...</td>\n",
              "    </tr>\n",
              "  </tbody>\n",
              "</table>\n",
              "</div>\n",
              "      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-19538142-c5e2-43c9-a490-489d5c2ba7be')\"\n",
              "              title=\"Convert this dataframe to an interactive table.\"\n",
              "              style=\"display:none;\">\n",
              "        \n",
              "  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n",
              "       width=\"24px\">\n",
              "    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n",
              "    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n",
              "  </svg>\n",
              "      </button>\n",
              "      \n",
              "  <style>\n",
              "    .colab-df-container {\n",
              "      display:flex;\n",
              "      flex-wrap:wrap;\n",
              "      gap: 12px;\n",
              "    }\n",
              "\n",
              "    .colab-df-convert {\n",
              "      background-color: #E8F0FE;\n",
              "      border: none;\n",
              "      border-radius: 50%;\n",
              "      cursor: pointer;\n",
              "      display: none;\n",
              "      fill: #1967D2;\n",
              "      height: 32px;\n",
              "      padding: 0 0 0 0;\n",
              "      width: 32px;\n",
              "    }\n",
              "\n",
              "    .colab-df-convert:hover {\n",
              "      background-color: #E2EBFA;\n",
              "      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n",
              "      fill: #174EA6;\n",
              "    }\n",
              "\n",
              "    [theme=dark] .colab-df-convert {\n",
              "      background-color: #3B4455;\n",
              "      fill: #D2E3FC;\n",
              "    }\n",
              "\n",
              "    [theme=dark] .colab-df-convert:hover {\n",
              "      background-color: #434B5C;\n",
              "      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n",
              "      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n",
              "      fill: #FFFFFF;\n",
              "    }\n",
              "  </style>\n",
              "\n",
              "      <script>\n",
              "        const buttonEl =\n",
              "          document.querySelector('#df-19538142-c5e2-43c9-a490-489d5c2ba7be button.colab-df-convert');\n",
              "        buttonEl.style.display =\n",
              "          google.colab.kernel.accessAllowed ? 'block' : 'none';\n",
              "\n",
              "        async function convertToInteractive(key) {\n",
              "          const element = document.querySelector('#df-19538142-c5e2-43c9-a490-489d5c2ba7be');\n",
              "          const dataTable =\n",
              "            await google.colab.kernel.invokeFunction('convertToInteractive',\n",
              "                                                     [key], {});\n",
              "          if (!dataTable) return;\n",
              "\n",
              "          const docLinkHtml = 'Like what you see? Visit the ' +\n",
              "            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n",
              "            + ' to learn more about interactive tables.';\n",
              "          element.innerHTML = '';\n",
              "          dataTable['output_type'] = 'display_data';\n",
              "          await google.colab.output.renderOutput(dataTable, element);\n",
              "          const docLink = document.createElement('div');\n",
              "          docLink.innerHTML = docLinkHtml;\n",
              "          element.appendChild(docLink);\n",
              "        }\n",
              "      </script>\n",
              "    </div>\n",
              "  </div>\n",
              "  "
            ]
          },
          "metadata": {},
          "execution_count": 10
        }
      ],
      "source": [
        "import pandas as pd\n",
        "\n",
        "#제목, 링크, 내용 1차원 리스트로 꺼내는 함수 생성\n",
        "def makeList(newlist, content):\n",
        "    for i in content:\n",
        "        for j in i:\n",
        "            newlist.append(j)\n",
        "    return newlist\n",
        "    \n",
        "#제목, 링크, 내용 담을 리스트 생성\n",
        "news_titles_1, news_url_1, news_contents_1 = [],[],[]\n",
        "\n",
        "#1차원 리스트로 만들기(내용 제외)\n",
        "makeList(news_titles_1,news_titles)\n",
        "makeList(news_url_1,news_url)\n",
        "makeList(news_contents_1,news_contents)\n",
        "\n",
        "\n",
        "#데이터 프레임 만들기\n",
        "news_df = pd.DataFrame({'title':news_titles_1,'link':news_url_1,'content':news_contents_1})\n",
        "news_df"
      ]
    },
    {
      "cell_type": "code",
      "source": [
        "#csv 파일로 저장\n",
        "news_df.to_csv('뉴스크롤링.csv', encoding = 'utf8')"
      ],
      "metadata": {
        "id": "1acCb-q_yILA"
      },
      "id": "1acCb-q_yILA",
      "execution_count": null,
      "outputs": []
    }
  ],
  "metadata": {
    "kernelspec": {
      "display_name": "Python 3 (ipykernel)",
      "language": "python",
      "name": "python3"
    },
    "language_info": {
      "codemirror_mode": {
        "name": "ipython",
        "version": 3
      },
      "file_extension": ".py",
      "mimetype": "text/x-python",
      "name": "python",
      "nbconvert_exporter": "python",
      "pygments_lexer": "ipython3",
      "version": "3.8.8"
    },
    "colab": {
      "name": "데사개_크롤링코드_연도필터",
      "provenance": [],
      "collapsed_sections": []
    }
  },
  "nbformat": 4,
  "nbformat_minor": 5
}